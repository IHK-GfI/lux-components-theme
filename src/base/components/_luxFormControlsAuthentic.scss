@use "sass:map";
@use "../luxcommon";
@use "../luxpalette";
@use "../../public/global";
@use "../luxelevations";
@use "../luxfocus";
@use "../../base/luxSvgIcons" as luxicons;

/*
 * Theming for LUX-Select
 */
lux-select-ac,
lux-lookup-combobox-ac {
  mat-select {
    font-family: luxcommon.$app-font-family;
    height: calc(1.5em - 1px) !important;
    // bisher noch nicht klar, warum das mat-select einen Pixel an Höhe mehr beansprucht, als es tatsächlich Hoch ist
    // daher wird hier die Höhe korrigiert, damit die Baseline eingehalten ist

    .mat-mdc-select-arrow-wrapper {
      margin-left: 2px;
      height: 24px;
      width: 24px;

      .mat-mdc-select-arrow {
        border: none;
        width: 100%;
        height: 100%;
        margin: 0;
        background-color: luxpalette.$lux-primary-color;
        -webkit-mask: url(luxicons.$arrow-button-down);
        -webkit-mask-repeat: no-repeat;
        -webkit-mask-position: center;
        -webkit-mask-size: cover;
        mask: url(luxicons.$arrow-button-down);
        mask-repeat: no-repeat;
        mask-position: center;
        mask-size: cover;
      }
    }

    &[aria-readonly="true"] {
      .mat-mdc-select-arrow {
        background-color: luxcommon.$dark-disabled-text;
      }
      .mat-mdc-select-trigger {
        cursor: text;
      }
    }

    &[aria-readonly="false"] .mat-mdc-select-arrow {
      background-color: luxpalette.$lux-primary-color;
    }

    &[aria-disabled="true"] .mat-mdc-select-arrow {
      background-color: luxcommon.$dark-disabled-text;
    }

    &[aria-disabled="false"] .mat-mdc-select-arrow {
      background-color: luxpalette.$lux-primary-color;
    }
  }
}

// Checkbox wird im Cdk-Overlay dargestellt und hängt nicht unter der Component selbst.
.lux-select-panel-ac .mat-pseudo-checkbox-checked.mat-pseudo-checkbox-full,
.lux-select-panel-ac-multiple .mat-pseudo-checkbox-checked.mat-pseudo-checkbox-full {
  background-color: luxpalette.$lux-primary-color;
}

.cdk-overlay-pane {
  .mat-option {
    font-family: luxcommon.$app-font-family;
  }
  .mat-mdc-autocomplete-panel.lux-autocomplete-panel-ac,
  .mat-mdc-autocomplete-panel.lux-autocomplete-panel-dense-ac,
  .mat-mdc-select-panel.lux-select-panel-ac,
  .mat-mdc-select-panel.lux-select-panel-ac-multiple {
    border: 2px solid luxpalette.$lux-primary-color;
    border-radius: 4px;
    box-shadow: none !important;
  }
}

/*
* Theming für Lux-Checkbox
*/
lux-checkbox-ac {
  .mdc-checkbox {
    padding: 0;

    .mdc-checkbox__background {
      top: 0;
      left: 0;
    }
  }

  label {
    font-family: luxcommon.$app-font-family;
    font-size: luxcommon.$form-control-font-size;
    color: luxcommon.$dark-primary-text;
    cursor: pointer;
  }

  .mat-mdc-checkbox-ripple {
    display: none;
  }
  .mat-mdc-checkbox-inner-container {
    // die Checkbox soll größer sein, als von Material vorgegeben
    width: 1.25em;
    height: 1.25em;
    margin-top: 0.125em;
    .mat-mdc-checkbox-frame {
      border-color: luxpalette.$lux-primary-color;
    }
    //bei mehrzeiligen Labels soll die Checkbox oben und nicht zentriert angezeigt werden
    //Deswegen wird hier das Margin-top: auto überschrieben
    //da wir die Größe der Box geändert haben mussten wir das Margin ebenfalls anpassen
    .mat-mdc-checkbox-frame {
      border-color: luxpalette.$lux-primary-color;
    }
  }

  & .mat-mdc-checkbox-disabled {
    label {
      color: luxcommon.$dark-disabled-text;
    }
    .mat-mdc-checkbox-inner-container .mat-mdc-checkbox-frame {
      border-color: luxcommon.$dark-disabled-text;
    }
  }

  &.lux-form-control-readonly {
    pointer-events: none;
  }
}

lux-datepicker-ac,
lux-datetimepicker-ac {
  lux-form-control-wrapper .lux-form-control-wrapper .lux-form-control-container-authentic {
    display: block;
  }
  mat-datepicker-toggle {
    height: 24px;
    width: 24px;

    .mdc-icon-button.mat-mdc-icon-button.mat-mdc-button-base {
      height: 24px;
      width: 24px;
      padding: 0;

      lux-icon.lux-datepicker-toggle-icon,
      mat-icon.mat-icon {
        height: 24px;
        width: 24px;
        padding: 0px !important;
      }

      &[disabled="true"] {
        svg {
          color: luxcommon.$dark-disabled-text;
        }
      }
    }
  }
}
.cdk-overlay-pane .mat-datepicker-content,
.lux-datetimepicker-overlay .mat-mdc-card.lux-card {
  border: 2px solid luxpalette.$lux-primary-color;
  box-shadow: none !important;
  margin: 13px -9px 0;

  & .mat-calendar-header button:hover {
    background-color: #fff !important;
    color: map-get(luxpalette.$lux-palette_primary, 300);
  }
}

/*
* Theming für lux-Toggle
*/
lux-toggle-ac {
  .mat-mdc-slide-toggle {
    .mdc-switch__ripple {
      display: none;
    }

    label {
      color: luxcommon.$dark-primary-text;
      font-family: luxcommon.$app-font-family;
    }

    &.mat-checked .mat-slide-toggle-bar {
      background-color: map-get(luxpalette.$lux-palette_primary, 50);
    }

    &.mat-disabled {
      //von Material wird beim gesamten Element die Opacity auf 0.38 gesetzt.
      //wir wollen aber nur den "Schalter" änderen, das Label wird bei uns über die Color gesteuert
      opacity: 1;
      .mat-slide-toggle-bar {
        opacity: 0.38;
      }

      .lux-form-label {
        color: luxcommon.$dark-disabled-text;
      }

      &.mat-checked {
        .mat-slide-toggle-bar {
          background-color: luxcommon.$dark-disabled-text;
        }

        .mat-slide-toggle-thumb {
          background-color: #666666;
        }
      }

      &:not(.mat-checked) {
        .mat-slide-toggle-bar {
          background-color: luxcommon.$dark-disabled-text;
        }
      }
    }
  }

  &.lux-form-control-readonly {
    pointer-events: none;
  }
}

/*
 * Theming for LUX-Radio
 */
lux-radio-ac {
  .mat-mdc-radio-button .mdc-radio {
    padding: 0;
  }

  .mdc-radio__background {
    // damit ist der Focus-Indicator rund, wie bei Toggle-Thumb und Chips
    border-radius: 50%;

    span.mdc-radio__outer-circle {
      border-color: luxpalette.$lux-primary-color;
    }
  }
  .mdc-label {
    color: luxcommon.$dark-primary-text;
    font-family: luxcommon.$app-font-family;
  }

  .mat-mdc-radio-checked {
    &.mat-radio-disabled label .mdc-radio__background {
      span.mdc-radio__inner-circle {
        background-color: luxcommon.$dark-disabled-text;
      }

      span.mdc-radio__outer-circle {
        border-color: luxcommon.$dark-disabled-text;
      }
    }
  }

  .mat-mdc-radio-group {
    display: flex;
    box-sizing: border-box;
    place-content: stretch flex-start;
    align-items: stretch;

    &.lux-horizontal {
      gap: 0.75em;
      flex-direction: row;
      flex-flow: wrap;
      max-height: 100%;
    }
    &.lux-vertical {
      gap: 0;
      flex-direction: column;
      max-width: 100%;
    }

    .mat-mdc-radio-button {
      flex: 0 0 auto;
      box-sizing: border-box;
    }
  }

  .mdc-radio--disabled label.mdc-label {
    .mdc-label-content {
      color: luxcommon.$dark-disabled-text;
    }

    .mat-radio-container {
      span.mdc-radio__inner-circle {
        background-color: luxcommon.$dark-disabled-text;
      }

      span.mdc-radio__outer-circle {
        border-color: luxcommon.$dark-disabled-text;
      }
    }
  }

  &.lux-form-control-readonly {
    pointer-events: none;
  }
}

/*
 * Theming for LUX-Input/LUX-Textarea
*/
// Umstylen des Standard-Aussehens von Inputs/Textareas
input,
input.mat-input-element,
textarea {
  font: inherit;
  background: 0 0;
  color: currentColor;
  border: none;
  outline: 0;
  padding: 0;
  margin: 0;
  width: 100%;
  max-width: 100%;
  vertical-align: bottom;
  text-align: inherit;
  font-size: luxcommon.$form-control-font-size;
}
lux-textarea-ac text-area {
  line-height: normal;
}

/**
 * Theming für LUX-Chips
 */
lux-chips-ac {
  .mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) {
    &.lux-chip-color-default {
      background-color: var(--lux-theme-primary-500) !important;

      .mat-mdc-chip-action-label {
        color: white;
      }

      lux-icon {
        color: white;
        opacity: 1;
      }
    }

    &.lux-chip-color-primary {
      background-color: var(--lux-theme-primary-500) !important;

      .mat-mdc-chip-action-label {
        color: white;
      }

      lux-icon {
        color: white;
        opacity: 1;
      }
    }

    &.lux-chip-color-accent {
      background-color: var(--lux-theme-accent-500) !important;

      .mat-mdc-chip-action-label {
        color: white;
      }

      lux-icon {
        color: white;
        opacity: 1;
      }
    }

    &.lux-chip-color-warn {
      background-color: var(--lux-theme-warn-500) !important;

      .mat-mdc-chip-action-label {
        color: white;
      }

      lux-icon {
        color: white;
        opacity: 1;
      }
    }
  }

  .lux-chips-autocomplete-icon {
    color: var(--lux-theme-primary-500);
    font-size: 1.5rem;
    padding-right: 4px;
    cursor: pointer;

    &.lux-disabled {
      color: var(--lux-theme-dark-disabled-text);
      cursor: default;
    }
  }
  .lux-chips {
    mat-chip {
      &.mat-chip-disabled {
        background-color: luxcommon.$dark-disabled-text !important;
        color: luxcommon.$app-data-bg !important;
        opacity: 1;

        lux-icon {
          mat-icon {
            color: luxcommon.$app-data-bg;
          }
        }
      }
    }
    mat-chip-list {
      & div.mat-chip-list-wrapper {
        margin: 0px 0px 0px -4px;
      }
    }
  }

  .lux-hide-input-border .lux-form-control-container-authentic {
    border: none;
    padding: 0;
    box-shadow: none !important; // den Focus-indicator für das Inputausblenden
  }
}
.lux-chips-ac-autocomplete-panel.mat-mdc-autocomplete-panel,
.lux-chips-ac-autocomplete-panel-dense.mat-mdc-autocomplete-panel {
  margin-top: -18px;
  margin-left: 0;
  margin-right: 0;
  border-radius: 4px;

  box-shadow: none !important;
  border: 2px solid luxpalette.$lux-primary-color;
}
.lux-chips-ac-autocomplete-panel-dense.mat-mdc-autocomplete-panel {
  margin-top: -18px;
}

/*
 * Theming for LUX-Slider
 */
lux-slider-ac {
  lux-form-control-wrapper .lux-form-control-wrapper .lux-form-control-container-authentic.lux-no-input-row {
    padding-top: 20px;
    padding-bottom: 4px;

    mat-slider {
      height: 15px;

      input {
        height: 15px;
      }

      .mat-mdc-slider-visual-thumb {
        height: 15px;

        .mat-ripple {
          width: 0;
          height: 0;
        }
      }

      mat-slider-visual-thumb div.mdc-slider__value-indicator-container {
        bottom: 22px;

        .mdc-slider__value-indicator {
          height: 20px;
          padding-left: 4px;
          padding-right: 4px;
        }
      }
    }
  }

  &.lux-form-control-readonly {
    pointer-events: none;
  }
}
